## π“ λ°°κ²½ μ§€μ‹ (Context)

μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ λ” μ‰½κ² μ‚¬μ©ν•  μ μλ„λ΅ λ€ν™”ν• λ©”λ‰΄ TUIλ¥Ό μ¶”κ°€ν•κ³ , λ¨λ“  λ©”μ‹μ§€λ¥Ό ν•κΈ€λ΅ μƒμ„Έν•κ² ν‘μ‹ν•©λ‹λ‹¤.

## π― λ©ν‘ (Goal)

1. λ€ν™”ν• λ©”λ‰΄ TUI κµ¬ν„ (Rich κΈ°λ°)
2. λ¨λ“  λ©”μ‹μ§€ ν•κΈ€/μμ–΄ λ³‘κΈ°
3. μƒμ„Έν• μ„¤λ… μ¶”κ°€
4. ν™κ²½λ³€μ μ¤λ¥ μμ • (lazy initialization)
5. μ‚¬μ©μ μΉν™”μ μΈ μΈν„°νμ΄μ¤

## π› οΈ κΈ°μ μ  κ³„ν (Technical Plan)

### κµ¬ν„λ λ¨λ“

#### 1. `src/novel_total_processor/menu.py`
- **InteractiveMenu ν΄λμ¤**:
  - `show_banner()`: λ°°λ„ ν‘μ‹
  - `show_status()`: ν„μ¬ μƒνƒ ν‘μ‹ (ν•κΈ€/μμ–΄)
  - `show_menu()`: λ©”μΈ λ©”λ‰΄ (8κ° μµμ…)
  - `run_stage0()` ~ `run_stage5()`: κ° Stage μ‹¤ν–‰
  - `run_pipeline()`: μ „μ²΄ νμ΄ν”„λΌμΈ
  - `run()`: λ©”μΈ λ£¨ν”„

- **λ©”λ‰΄ μµμ…**:
  1. νμΌ μΈλ±μ‹± (File Indexing)
  2. λ©”νƒ€λ°μ΄ν„° μμ§‘ (Metadata Collection)
  3. ν™”μ κ²€μ¦ (Episode Verification)
  4. νμΌλ… μƒμ„± (Filename Generation)
  5. EPUB μƒμ„± (EPUB Generation)
  6. μ „μ²΄ νμ΄ν”„λΌμΈ (Full Pipeline)
  7. μƒνƒ ν™•μΈ (Status)
  0. μΆ…λ£ (Exit)

#### 2. `GeminiClient` μμ •
- **Lazy Initialization**:
  - `__init__`μ—μ„ μ¦‰μ‹ API ν‚¤ μ²΄ν¬ν•μ§€ μ•μ
  - `_ensure_initialized()`: API μ‚¬μ© μ‹μ μ— μ²΄ν¬
  - ν•κΈ€ μ¤λ¥ λ©”μ‹μ§€ μ¶”κ°€

### λ©”μ‹μ§€ ν•μ‹
```
β… μ™„λ£! (Completed!)
  β€Ά μ΄ νμΌ μ (Total files): 2438
  β€Ά μ¤‘λ³µ νμΌ μ (Duplicates): 121
```

### μ‹¤ν–‰ λ°©λ²•
```bash
# λ€ν™”ν• λ©”λ‰΄
python -m novel_total_processor.menu

# λλ” (μ„¤μΉ ν›„)
ntp-menu
```

## β… μ™„λ£ μ΅°κ±΄ (Definition of Done)

- [x] λ€ν™”ν• λ©”λ‰΄ TUI κµ¬ν„
- [x] λ¨λ“  λ©”μ‹μ§€ ν•κΈ€/μμ–΄ λ³‘κΈ°
- [x] μƒμ„Έν• μ„¤λ… μ¶”κ°€
- [x] GeminiClient lazy initialization
- [x] ν™κ²½λ³€μ μ¤λ¥ λ©”μ‹μ§€ κ°μ„ 
- [x] pyproject.toml μ—”νΈλ¦¬ν¬μΈνΈ μ¶”κ°€
- [x] λ©”λ‰΄ ν…μ¤νΈ μ„±κ³µ

## π“ μ§„ν–‰ κΈ°λ΅

| λ‚ μ§ | λ‚΄μ© |
|:---|:---|
| 2026-02-12 | μ΄μ μƒμ„± |
| 2026-02-12 | λ€ν™”ν• λ©”λ‰΄ TUI κµ¬ν„ μ™„λ£, ν™κ²½λ³€μ μ¤λ¥ μμ • |
